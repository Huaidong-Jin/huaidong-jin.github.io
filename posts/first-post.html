<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>日本の金融業界分析 - Jimmy Kin</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+JP:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-color: #ffffff;
            --text-color: #1a202c;
            --text-light: #718096;
            --border-color: #e2e8f0;
            --accent-color: #3182ce;
            --hover-bg: #f7fafc;
        }

        [data-theme="dark"] {
            --bg-color: #1a202c;
            --text-color: #f7fafc;
            --text-light: #a0aec0;
            --border-color: #2d3748;
            --accent-color: #63b3ed;
            --hover-bg: #2d3748;
        }

        body {
            font-family: 'Inter', 'Noto Sans JP', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            font-size: 16px;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        /* Navigation */
        .nav {
            border-bottom: 1px solid var(--border-color);
            background: var(--bg-color);
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
        }

        .nav-container {
            max-width: 768px;
            margin: 0 auto;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-brand {
            font-weight: 600;
            font-size: 1.125rem;
            color: var(--text-color);
            text-decoration: none;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .nav-link {
            color: var(--text-light);
            text-decoration: none;
            font-size: 0.875rem;
            transition: color 0.2s ease;
        }

        .nav-link:hover, .nav-link.active {
            color: var(--text-color);
        }

        /* Main Content */
        .main {
            max-width: 768px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .article-header {
            padding: 3rem 0 2rem;
            text-align: center;
        }

        .article-title {
            font-size: 2.25rem;
            font-weight: 700;
            line-height: 1.2;
            margin-bottom: 1rem;
            color: var(--text-color);
        }

        .article-meta {
            color: var(--text-light);
            font-size: 0.875rem;
            margin-bottom: 2rem;
        }

        /* Section Navigation */
        .section-nav {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
            margin-bottom: 3rem;
            flex-wrap: wrap;
        }

        .section-btn {
            background: none;
            border: 1px solid var(--border-color);
            color: var(--text-light);
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .section-btn:hover {
            background: var(--hover-bg);
            color: var(--text-color);
        }

        .section-btn.active {
            background: var(--accent-color);
            color: white;
            border-color: var(--accent-color);
        }

        /* Article Content */
        .article-content {
            padding: 2rem 0;
        }

        .content-section {
            margin-bottom: 3rem;
        }

        .section-title {
            font-size: 1.875rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            color: var(--text-color);
        }

        .section-subtitle {
            font-size: 1.25rem;
            font-weight: 500;
            margin: 2rem 0 1rem;
            color: var(--text-color);
        }

        .section-text {
            margin-bottom: 1.5rem;
            line-height: 1.7;
            color: var(--text-color);
        }

        /* Cards */
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .card {
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1.5rem;
            background: var(--bg-color);
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }

        .card-title {
            font-weight: 500;
            margin-bottom: 0.75rem;
            color: var(--text-color);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .card-content {
            color: var(--text-light);
            font-size: 0.875rem;
            line-height: 1.6;
        }

        /* Process Flow */
        .process-flow {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            margin: 2rem 0;
            flex-wrap: wrap;
        }

        .process-step {
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
            flex: 1;
            min-width: 150px;
        }

        .process-step:hover, .process-step.active {
            border-color: var(--accent-color);
            background: var(--hover-bg);
        }

        .process-arrow {
            color: var(--text-light);
            font-size: 1.5rem;
        }

        .process-detail {
            background: var(--hover-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 2rem;
            margin: 1.5rem 0;
            line-height: 1.7;
            white-space: pre-line;
        }

        /* Chart Container */
        .chart-section {
            background: var(--hover-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .chart-container {
            position: relative;
            height: 400px;
            margin: 1.5rem 0;
        }

        .metric-buttons {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .metric-btn {
            background: none;
            border: 1px solid var(--border-color);
            color: var(--text-light);
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .metric-btn:hover {
            background: var(--hover-bg);
            color: var(--text-color);
        }

        .metric-btn.active {
            background: var(--accent-color);
            color: white;
            border-color: var(--accent-color);
        }

        /* Theme Toggle */
        .theme-toggle {
            position: fixed;
            top: 2rem;
            right: 2rem;
            background: var(--bg-color);
            border: 1px solid var(--border-color);
            color: var(--text-color);
            width: 40px;
            height: 40px;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            z-index: 1000;
        }

        .theme-toggle:hover {
            background: var(--hover-bg);
        }

        /* Author Bio */
        .author-bio {
            border-top: 1px solid var(--border-color);
            padding: 3rem 0;
            margin-top: 3rem;
            text-align: center;
        }

        .author-name {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .author-description {
            color: var(--text-light);
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .social-links {
            display: flex;
            gap: 1rem;
            justify-content: center;
        }

        .social-link {
            color: var(--text-light);
            font-size: 1.125rem;
            transition: color 0.2s ease;
        }

        .social-link:hover {
            color: var(--accent-color);
        }

        /* Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal.visible {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: var(--bg-color);
            border-radius: 8px;
            padding: 2rem;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .modal-close {
            background: var(--accent-color);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            margin-top: 1.5rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .nav-container, .main {
                padding: 1rem;
            }

            .article-title {
                font-size: 1.875rem;
            }

            .section-title {
                font-size: 1.5rem;
            }

            .theme-toggle {
                top: 1rem;
                right: 1rem;
            }

            .process-flow {
                flex-direction: column;
            }

            .process-arrow {
                transform: rotate(90deg);
            }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body class="antialiased">
    <!-- Application Structure Plan: A top-level navigation system filters a central dashboard. The default 'Overview' view shows macro trends (Transformation, Challenges, Future). Selecting a sector (Banking, Securities, Insurance) updates the dashboard to show a sector-specific snapshot, an interactive HTML/CSS workflow diagram, and a comparable financial performance chart. This structure prioritizes user-driven exploration and direct comparison over the report's linear narrative, making complex information digestible and engaging. -->
    <!-- Visualization & Content Choices: 1. Financial Performance: Interactive Bar Chart (Chart.js) to compare key players across multiple metrics (revenue, profit) selected by the user. Goal: Compare. Justification: Dynamic comparison in a single component. 2. Operational Flow: Interactive Diagram (HTML/Tailwind) with clickable stages (Front/Middle/Back Office) that reveal detailed text. Goal: Organize/Explain. Justification: Visually intuitive and interactive alternative to static text; avoids SVG/Mermaid. 3. Transformation Drivers/Challenges: Interactive Cards (HTML/Tailwind) that expand/show modals on click. Goal: Inform. Justification: Breaks down text, encourages exploration. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <!-- Navigation -->
    <nav class="nav">
        <div class="nav-container">
            <a href="/" class="nav-brand">JK</a>
            <div class="nav-links">
                <a href="/" class="nav-link">Home</a>
                <a href="/about.html" class="nav-link">About</a>
                <a href="/posts/first-post.html" class="nav-link active">Blog</a>
                <a href="https://github.com/JimmyKin" target="_blank" class="nav-link">Projects</a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main">
        <!-- Article Header -->
        <header class="article-header">
            <h1 class="article-title">日本の金融業界分析</h1>
            <div class="article-meta">
                2025年06月16日 • by Jimmy Kin
            </div>
            
            <!-- Section Navigation -->
            <nav class="section-nav" id="section-nav">
                <button class="section-btn active" data-view="overview">全体像</button>
                <button class="section-btn" data-view="banking">銀行</button>
                <button class="section-btn" data-view="securities">証券</button>
                <button class="section-btn" data-view="insurance">保険</button>
            </nav>
        </header>

        <!-- Article Content -->
        <article class="article-content" id="article-content">
            <!-- Content will be rendered here by JavaScript -->
        </article>

        <!-- Author Bio -->
        <footer class="author-bio">
            <div class="author-name">Jimmy Kin</div>
            <div class="author-description">
                テクノロジーとイノベーションの熱心な支持者として、金融業界のデジタル変革と市場動向の分析に取り組んでいます。
            </div>
            <div class="social-links">
                <a href="https://github.com/JimmyKin" target="_blank" class="social-link" title="GitHub">
                    <i class="fab fa-github"></i>
                </a>
            </div>
        </footer>
    </main>

    <!-- Theme Toggle -->
    <button class="theme-toggle" onclick="toggleTheme()" title="テーマを切り替え">
        <i class="fas fa-moon" id="theme-icon"></i>
    </button>

    <!-- Modal -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <h2 id="modal-title" class="modal-title"></h2>
            <div id="modal-body"></div>
            <button id="modal-close" class="modal-close">閉じる</button>
        </div>
    </div>

    <script>
// Data structure for the report
const reportData = {
    overview: {
        title: "日本の金融機関業界変革・現状・課題調査報告",
        intro: "日本の金融機関（銀行・証券・保険）は近年、大規模なデジタル変革の渦中にあります。DXは単なる技術導入ではなく、生き残り戦略の核心と位置付けられ、各社がこぞって推進しています。",
        sections: [
            { 
                title: "業界の変革（デジタル化・DX、フィンテック連携、規制変化、ESGへの統合）",
                type: 'cards',
                items: [
                    { id: 'dx', title: 'デジタル変革・DX推進', icon: '💻', content: `メガバンクでは、DXにより約4万人分（全従業員の1割相当）の業務量削減が見込まれ、主に事務・管理、支店、コールセンター業務の効率化が進みました<a href="https://ibm.com" target="_blank" class="text-blue-600">[IBM]</a>。各社が従来のフロント・ミドル・バックオフィス別々に稟議・承認を行う縦割りワークフローを見直し、顧客中心のインテリジェント・ワークフローへの再設計に舵を切り始めています。今後は営業店の統廃合と非対面チャネル拡充による顧客接点の変革が加速し、顧客一人ひとりに最適化した「ハイパーパーソナライゼーション」が金融サービスの新たな競争軸となっています<a href="https://brainpad.co.jp" target="_blank" class="text-blue-600">[BrainPad]</a>。` },
                    { id: 'fintech', title: 'フィンテック連携の促進', icon: '🤝', content: `政府は2018年の銀行法改正でオープンAPI（外部企業への銀行機能の開放）を制度化し、フィンテック企業との安全なデータ連携基盤を整えました<a href="https://ey.com" target="_blank" class="text-blue-600">[EY Japan]</a>。家計簿アプリ等の第三者サービスが銀行口座データにアクセスできる環境が整いましたが、当初は銀行側がAPI接続手数料を高額に設定するケースもありました。地方銀行では「TSUBASAアライアンス」の複数行が共同でオープンAPI基盤を構築してフィンテック企業との迅速なサービス連携を実現しています<a href="https://tandiic.co.jp" target="_blank" class="text-blue-600">[タンディック]</a>。` },
                    { id: 'regulation', title: '規制・政策の進化', icon: '⚖️', content: `日本銀行の異次元緩和による長期低金利政策は銀行収益構造に大きな影響を与え、各行は貸出利ざや縮小を補うため手数料ビジネスや海外展開に注力せざるを得ませんでした。証券業界では金融商品取引法の改正によりデジタル債券やセキュリティトークンの発行環境が整備され、新たな市場創出が進んでいます。保険業界でもソルベンシー規制（経済価値ベースの資本規制）の導入が予定され、経営に与える影響が大きいです。政府がキャッシュレス決済比率向上（2025年までに40%目標）やNISA恒久化による国民の資産形成促進策を打ち出し、銀行・証券各社はこれに対応したサービス拡充を急いでいます。` },
                    { id: 'esg', title: 'ESG要素の統合', icon: '🌿', content: `メガバンク3行は「2050年カーボンニュートラル」を掲げ、石炭火力発電向け融資停止など融資ポートフォリオのグリーントランジション計画を進めています。しかし現状では、3メガバンク合計でパリ協定以降に5,450億ドル超を化石燃料関連に融資したとの報告があり（2024年時点）、投資家からは気候関連財務リスクの開示強化や高排出先へのエンゲージメント体制強化が求められています<a href="https://shareholderaction.asia" target="_blank" class="text-blue-600">[ShareholderAction]</a>。環境省の調査によれば社内にESG知見を蓄積できている金融機関は3割弱にとどまり、多くの機関で人材・ノウハウ不足が課題とされています<a href="https://greenfinanceportal.env.go.jp" target="_blank" class="text-blue-600">[環境省]</a>。` }
                ]
            },
            {
                title: "業界全体の重要な課題",
                type: 'list',
                intro: '現状の金融機関の業務フローには、各業種共通していくつかの課題が指摘できます。非効率やボトルネック、レガシーシステム問題、人材・顧客課題が複合的に存在し、これらを解決することが金融機関の競争力強化と持続的成長に不可欠です。',
                items: [
                    { title: "銀行業界の課題", content: `長引く低金利環境の影響により預貸金利ざやが極端に縮小し、地銀の平均預貸利ザヤは1%未満の超低水準まで縮小しました。フィンテックやネオバンクとのデジタル競争が激化し、GAFAや国内IT企業が金融領域に参入し「銀行でなくてもできること」が着実に奪われつつあります。また、数十年前から稼働するメインフレーム基幹系やレガシーなオフコンに依存したシステムが重大障害のリスクやメンテナンス費用の増大を招いています<a href="https://fit.nikkin.co.jp" target="_blank" class="text-blue-600">[フィット]</a>。` },
                    { title: "証券業界の課題", content: `売買委託手数料の減少傾向が深刻で、SBI証券や楽天証券が株式売買手数料の無料化に踏み切り、他社も追随する流れが続いており、売買手数料ゼロが当たり前になりつつあります<a href="https://dir.co.jp" target="_blank" class="text-blue-600">[大和総研]</a>。少子高齢化により60歳以上の高齢層が個人金融資産の大半を保有し<a href="https://brainpad.co.jp" target="_blank" class="text-blue-600">[BrainPad]</a>、投資家層・行動の変化が課題となっています。またグローバル市場からの競争圧力が高まり、外資系投資銀行との競合や顧客マネーの国外流出が問題となっています。` },
                    { title: "保険業界の課題", content: `超高齢社会となり、被保険者の高齢化に伴い死亡率の上昇→保険金支払い増加となり、各社の収益に負担がかかる構造です。低金利下での収益性低下（逆ざや問題）により安全資産の国債利回りが極端に低下し、過去に高い予定利率で販売した契約との逆ざやに悩まされています<a href="https://nli-research.co.jp" target="_blank" class="text-blue-600">[ニッセイ基礎研]</a>。またLemonade社などInsurTech企業との競争・顧客流出の懸念があり、従来の煩雑な手続きを簡略化し、低コスト構造で割安な保険料を提示できる強みを持つ新興プレーヤーが台頭しています<a href="https://note.com" target="_blank" class="text-blue-600">[Note]</a>。` }
                ]
            },
            {
                title: "将来展望と戦略提言",
                type: 'cards', 
                items: [
                    { id: 'digital_transformation', title: 'デジタル化・自動化戦略', icon: '🤖', content: `RPAの全社展開により定型事務をロボットに代替させ、人手を高度な業務にシフトすることが重要です。住友生命では事務処理のRPA化で年間20万時間の作業削減を達成しています。STP（Straight Through Processing）の推進により、フロント〜バック間でのシステム連携を強化し、一度入力したデータがそのままバック処理まで流れるように統合基盤を構築する必要があります<a href="https://biprogy.com" target="_blank" class="text-blue-600">[BIPROGY]</a>。` },
                    { id: 'legacy_modernization', title: 'レガシーシステム刷新', icon: '⚡', content: `「2025年の崖」を乗り越えるため、基幹システムの刷新は待ったなしです。機能単位でAPI連携可能なマイクロサービスに置き換えていくアプローチが有効で、クラウドサービスの活用も推奨されます。北國銀行や北洋銀行などは勘定系システムの次期化でオープン勘定系を構築・クラウド移行する計画を発表しています<a href="https://tandiic.co.jp" target="_blank" class="text-blue-600">[タンディック]</a>。` },
                    { id: 'customer_experience', title: '顧客体験向上と海外展開', icon: '🌏', content: `手続きの簡素化・迅速化を徹底し、オムニチャネル戦略で顧客接点を最適化する必要があります。米国Lemonade社ではAIによる全自動処理で保険金請求から2秒での支払いを実現し、煩雑な手続き・遅延を一掃しました<a href="https://note.com" target="_blank" class="text-blue-600">[Note]</a>。シンガポールのDBS銀行は「世界最高のデジタル銀行」として知られ、CEO主導で全社に「テクノロジー企業マインド」を植え付け、従業員数に占めるエンジニア比率を50%超にまで高めました<a href="https://toyokeizai.net" target="_blank" class="text-blue-600">[東洋経済]</a>。` }
                ]
            }
        ]
    },
    banking: {
        name: "銀行",
        title: "銀行業界の現状と課題",
        intro: `直近の2025年3月期決算では、メガバンク3グループの連結純利益合計が約3兆9,263億円（前期比+25.3%）と2年連続で過去最高を更新しました<a href="https://equity.jiji.com" target="_blank" class="text-blue-600">[時事通信]</a>。日銀が金融緩和を修正し長期金利上昇を容認したことで国内貸出の利ざやが若干改善したほか、各行が保有株式の売却益を積極的に計上したことが増益要因です。技術導入の観点では、三菱UFJ銀行がAIチャットボットによる24時間顧客対応を行い、みずほ銀行は住宅ローンのAI事前診断サービスで顧客の借入可能額を瞬時算出しています<a href="https://ajike.co.jp" target="_blank" class="text-blue-600">[アジケ]</a>。`,
        operationalFlow: {
            title: "銀行の業務フローと特徴",
            intro: `銀行業務はフロントオフィス（顧客対応部門）、ミドルオフィス（管理・支援部門）、バックオフィス（事務・基盤部門）に分かれます。日本の銀行は伝統的に全国に支店網を展開し地域密着の対面サービスを提供してきましたが、近年は店舗統廃合とデジタルチャネルへの誘導が進んでいます<a href="https://ibm.com" target="_blank" class="text-blue-600">[IBM]</a>。日本の銀行では稟議書による決裁プロセスが重視され、従来は紙の稟議書回付で時間を要するケースも多く、現在は電子稟議システム導入で効率化が進められています。`,
            stages: [
                { id: 'front', name: 'フロントオフィス', content: `【業務内容】店舗窓口や渉外担当が預金口座開設、融資相談、金融商品の提案などを行い、近年ではインターネットバンキングやモバイルアプリといった非対面チャネルも重要なフロント機能となっています。\n【課題】地方では高齢顧客対応のため出張所や移動店舗を運営するケースもあり、顧客ニーズに応じたチャネル戦略が求められます。デジタルチャネルへの移行は進んでいますが、複雑な取引では依然として対面での説明が必要なケースが多いです。` },
                { id: 'middle', name: 'ミドルオフィス', content: `【業務内容】融資審査部門がフロントで獲得した融資案件の信用リスクを審査し、与信判断を行います。また市場リスクや流動性リスクを計測しヘッジ策を講じるリスク管理部門、コンプライアンスやマネーロンダリング対策を担う法務・コンプライアンス部門もミドル機能です。日本では金融庁の検査や日銀考査への対応も重要なミドル業務です。\n【課題】従来のフロント・ミドル・バックそれぞれの業務単位で個別に稟議・承認プロセスが存在し、部署間で情報や判断が十分共有されない「サイロ化」が起きがちでした<a href="https://ibm.com" target="_blank" class="text-blue-600">[IBM]</a>。` },
                { id: 'back', name: 'バックオフィス', content: `【業務内容】預金や融資取引の伝票処理・照合、決済ネットワーク（全国銀行データ通信システム＝全銀システム等）への接続運用、財務経理、人事総務など、多岐にわたる業務があります。日本の銀行では、振込・決済事務を処理する集中事務センターを設置し、各支店から後方事務を集約しています。\n【課題】従来通帳・印鑑による取引確認や紙での帳票管理が重視されてきましたが、近年はペーパーレス・印鑑廃止の流れが顕著です（大手行は2021年前後にほとんどの手続で印鑑届出を不要化）。システム毎に多数のサブシステム・Excel台帳が乱立し、データが一元管理されず分析に活かせないという課題もあります。` }
            ]
        },
        financials: {
            title: "主要銀行の業績比較 (2023/24年度)",
            intro: `三菱UFJ FGは約6,000億円、三井住友FGは約4,850億円、みずほFGも2,000億円超の株式売却益を計上し、3社とも純利益が過去最高となりました<a href="https://equity.jiji.com" target="_blank" class="text-blue-600">[時事通信]</a>。メガバンク以外でも、三井住友信託HDやりそなHDを含む大手5グループ合計で純利益4兆3,973億円（+30.5%）に達しており、海外経済の回復と若干の金利上昇を追い風に大手行の業績は堅調です。`,
            data: {
                labels: ['三菱UFJ FG', '三井住友FG', 'みずほFG', 'りそなHD', '三井住友信託HD'],
                datasets: [
                    { label: '純利益 (兆円)', data: [1.94, 1.19, 0.89, 0.26, 0.15], backgroundColor: 'rgba(54, 162, 235, 0.6)' },
                    { label: '株式売却益 (千億円)', data: [6.0, 4.85, 2.1, 0.8, 0.3], backgroundColor: 'rgba(75, 192, 192, 0.6)' },
                    { label: '総資産 (兆円)', data: [403.70, 295.24, 278.67, 55.2, 75.88], backgroundColor: 'rgba(255, 206, 86, 0.6)' },
                    { label: '時価総額 (兆円)', data: [17.19, 11.57, 6.89, 2.1, 2.42], backgroundColor: 'rgba(153, 102, 255, 0.6)' }
                ]
            }
        }
    },
    securities: {
        name: "証券",
        title: "証券業界の現状と課題",
        intro: `2023年度の証券各社の収益は大きく回復しました。日本証券業協会の統計によれば、協会員263社の2023年度決算で営業収益合計5兆4,290億円（前期比+29%）と大幅増収となり、営業損益は8,936億円（+92%）、当期純利益は6,654億円（前期比2倍近い+99%）と業界全体で大幅増益を達成しました<a href="https://jsda.or.jp" target="_blank" class="text-blue-600">[日本証券業協会]</a>。競争環境では、SBI証券は預かり資産27兆円・口座数約900万と国内個人取引シェアトップ級に成長し、楽天証券も口座数800万超で追随しています。`,
        operationalFlow: {
            title: "証券の業務フローと特徴",
            intro: `証券会社の業務フローもフロント・ミドル・バックに分類できます。フロントオフィスにはリテール営業や機関投資家営業、トレーダー、引受（投資銀行）担当など収益を直接生む部門が含まれます<a href="https://cammacs.jp" target="_blank" class="text-blue-600">[CAM]</a>。日本の大手証券は全国に多数の店舗を構え、高齢富裕層を中心に対面営業で顧客資産を預かってきましたが、現在はオンライン取引の比重も高まっており、ネット専業との競合の中で有人店舗の役割を再定義しています。`,
            stages: [
                { id: 'front', name: 'フロントオフィス', content: `【業務内容】リテール営業では各支店の担当者が個人顧客に株式・投信等を販売し、機関営業は年金基金や運用会社への提案を行います。トレーディング部門は市場での株式・債券売買やマーケットメイクを担当し、相場変動リスクを負いながら収益獲得を図ります。引受部門（IB部門）は企業の株式公開や社債発行を主幹事として支援し、手数料収入を得ます。\n【課題】手数料自由化とゼロ手数料取引の普及により、取引量ベースの収益モデルが完全に陳腐化し、付加価値の高いアドバイザリーサービスへの転換が生存の条件となっています。` },
                { id: 'middle', name: 'ミドルオフィス', content: `【業務内容】リスク管理部門が市場リスクや与信リスク（信用取引の保証金不足リスク等）を計測し、必要に応じポジション縮小を指示します。コンプライアンス部門はインサイダー取引防止や適合性の原則遵守をチェックし、内部監査部門と協力して営業現場を監督します。またトレードサポート部門はフロントのディーラーとバックオフィスの間に立ち、約定連絡や決済指図など取引処理を円滑化します。\n【課題】証券取引等監視委員会による売買審査や金融商品販売法に基づく説明義務への対応が徹底されており、ミドルオフィスはこれら法令遵守体制の整備を主導しています。` },
                { id: 'back', name: 'バックオフィス', content: `【業務内容】証券の決済バック業務では、株式売買の受渡（DVP決済）や顧客の預り資産の管理（保管振替機構との連携）が中心です。証券会社は取引所や清算機関（JASDECやJSCC）と接続しており、売買成立後、T+2日での決済に向けて資金と証券のやり取りを調整します。\n【課題】外国証券決済ではグローバルカストディとの連携が必要で、為替や海外市場の祝日などを考慮した事務処理が求められます。日本では株式の大量保有報告や不公正取引監視等の規制報告が頻繁であり、バック部門がそうした対外報告を正確に処理することも重要です。` }
            ]
        },
        financials: {
            title: "主要証券会社の業績比較 (2023/24年度)",
            intro: `委託手数料収入が6,749億円（+32%）と伸び、引受手数料も50%増加するなど株式発行・投資信託販売が好調でした。さらに、金融収支（主に信用取引の金利収入）が1兆8,105億円（+80%）と急増し、低金利下では振るわなかった信用取引関連収益が金利上昇で追い風を受けています<a href="https://jsda.or.jp" target="_blank" class="text-blue-600">[日本証券業協会]</a>。`,
            data: {
                labels: ['野村HD', '大和証券G', 'SMBC日興', 'みずほ証券', 'SBI証券'],
                datasets: [
                    { label: '純利益 (億円)', data: [668, 1074, 320, 180, 450], backgroundColor: 'rgba(54, 162, 235, 0.6)' },
                    { label: '委託手数料 (億円)', data: [280, 320, 150, 90, 850], backgroundColor: 'rgba(75, 192, 192, 0.6)' },
                    { label: '総資産 (兆円)', data: [49.56, 26.43, 18.2, 12.8, 8.5], backgroundColor: 'rgba(255, 206, 86, 0.6)' },
                    { label: '時価総額 (兆円)', data: [2.73, 1.73, 1.2, 0.8, 1.5], backgroundColor: 'rgba(153, 102, 255, 0.6)' }
                ]
            }
        }
    },
    insurance: {
        name: "保険",
        title: "保険業界の現状と課題",
        intro: `生命保険分野では、2023年度の生命保険各社の業績を見ると、コロナ禍で膨らんでいた医療保険金支払いが減少に転じたことから、保険引受の損益が改善しました<a href="https://nli-research.co.jp" target="_blank" class="text-blue-600">[ニッセイ基礎研]</a>。大手生保の2023年度の当期利益は、日本生命（連結）4,067億円、第一生命HD2,478億円、住友生命1,399億円など概ね前年度を上回りました。損害保険分野では、東京海上HDは2023年度に経常利益6,958億円と極めて高い収益力を示し<a href="https://kotora.jp" target="_blank" class="text-blue-600">[コトラ]</a>、純利益も3社中最大の約4,000億円規模を維持しました。技術革新の面では、損保ジャパンが画像AIで自動車事故の損傷を解析し、修理費見積や保険金支払いの迅速化に繋げています。`,
        operationalFlow: {
            title: "保険の業務フローと特徴",
            intro: `保険会社の業務もフロント（営業）、ミドル（企画・引受・管理）、バック（事務・支払い）に分類できますが、業種特性上やや異なる部分もあります。フロント業務としては、生命保険では営業職員（保険レディ）や代理店が新契約の獲得を担い、損害保険でも代理店（自動車販売店や旅行代理店など多様）がフロントとして契約募集を行います。日本の生保は約20万人とも言われる自社営業職員網を擁し、訪問によるきめ細かな営業が強みでしたが、近年は来店型保険ショップやネット保険の普及で従来型の訪問営業は縮小傾向です。`,
            stages: [
                { id: 'front', name: 'フロントオフィス', content: `【業務内容】生命保険では営業職員（保険レディ）や代理店が新契約の獲得を担い、損害保険でも代理店がフロントとして契約募集を行います。保険フロントは顧客のニーズを聞き取り最適な保障プランを提案するコンサルティング営業が求められ、ライフプランナーやファイナンシャルプランナー資格を持つ人材も増えています。また保険金支払い対応も含まれ、契約者からの事故の連絡や請求受付はコールセンターや事故受付センターが担います。\n【課題】従来型の訪問営業は縮小傾向で、来店型保険ショップやネット保険の普及に対応する必要があります。大災害発生時には保険会社社員総出で現地に被害調査員（アジャスター）を派遣し、迅速な保険金支払いに努める文化があります。` },
                { id: 'middle', name: 'ミドルオフィス', content: `【業務内容】保険商品を企画設計する商品開発部門、契約の引受審査を行うアンダーライティング部門、数理計算や資産運用を担うアクチュアリー部門、契約者サービス管理部門などがあります。引受審査では生命保険の場合、医務査定担当者が申込時の健康状態等を審査し、保険料率に見合ったリスクか判断します。保険金支払い部門も広義にはミドル機能で、特に死亡保険金や高度障害保険金など大きな支払いでは支払査定専門職が調査・審査を行います。\n【課題】日本では保険金不払い問題（2005年頃発覚）の反省から、支払漏れ防止のため支払査定基準を厳格化しチェック体制を強化しており、ミドル部門が内部統制の観点でこれを管理しています。` },
                { id: 'back', name: 'バックオフィス', content: `【業務内容】契約保全部門は契約内容の変更（住所変更や受取人変更）、保険料の集金管理、解約や貸付の手続きを行います。大量の契約を扱う生命保険では、契約情報を扱うホストコンピュータ（メインフレーム）上のシステムが長年使われてきましたが、老朽化したシステムの刷新が各社の課題となっています。給付金支払部門は医療保険の入院給付金や損保の小口支払いを迅速に処理します。\n【課題】最近ではWebやスマホアプリから請求手続きを受け付け、画像データとAI-OCRで診断書情報を読み取り、自動支払判定する仕組みを導入する社も出てきました。米国のInsurTech企業ではAIチャットボットが請求を審査しわずか2秒で保険金振込を完了したケースが報告されており<a href="https://note.com" target="_blank" class="text-blue-600">[Note]</a>、国内でも損保各社がAIによる自動査定に着手しています。` }
            ]
        },
        financials: {
            title: "主要保険会社の業績比較 (2023/24年度)",
            intro: `大手生保の2023年度の当期利益は、コロナ前低迷していた純利益が増加傾向に戻り、日本生命（連結）4,067億円、第一生命HD2,478億円、住友生命1,399億円など概ね前年度を上回りました。損保では、主要損保3社とも前年を上回る利益を計上し、東京海上HDは2023年度に経常利益6,958億円と極めて高い収益力を示しました<a href="https://kotora.jp" target="_blank" class="text-blue-600">[コトラ]</a>。`,
            data: {
                labels: ['日本生命', '東京海上HD', '第一生命HD'],
                datasets: [
                    { label: '売上収益 (兆円)', data: [7.36, 6.78, 10.03], backgroundColor: 'rgba(54, 162, 235, 0.6)' },
                    { label: '純利益 (兆円)', data: [0.51, 0.87, 0.46], backgroundColor: 'rgba(75, 192, 192, 0.6)' },
                    { label: '総資産 (兆円)', data: [91.95, 31.83, 67.52], backgroundColor: 'rgba(255, 206, 86, 0.6)' },
                    { label: '時価総額 (兆円)', data: [0, 9.81, 3.95], backgroundColor: 'rgba(153, 102, 255, 0.6)' }
                ]
            }
        }
    },
    aiSolutions: {
        banking: {
            front: {
                title: "フロントオフィス向けAI解決策",
                solutions: [
                    {
                        title: "インテリジェント・ドキュメント・プロセッシング（IDP）",
                        content: "AI-OCRと自然言語処理を組み合わせ、手書きの申込書や本人確認書類を自動で読み取り・検証。ハンコの真正性チェックも画像認識AIで自動化し、顧客オンボーディング時間を従来の数日から数時間に短縮。"
                    },
                    {
                        title: "オムニチャネル顧客体験プラットフォーム",
                        content: "顧客がオンラインで開始した手続きを支店で継続できるシームレスな体験を提供。AIが顧客の過去の取引履歴と行動パターンを分析し、最適なチャネルと次のアクションを提案。"
                    },
                    {
                        title: "パーソナライズド・ファイナンシャル・アドバイザリー",
                        content: "顧客の資産状況、ライフステージ、リスク許容度をAIが総合分析し、個別最適化された金融商品とサービスを提案。チャットボットとヒューマンアドバイザーのハイブリッド対応で24時間サポート。"
                    }
                ]
            },
            middle: {
                title: "ミドルオフィス向けAI解決策",
                solutions: [
                    {
                        title: "AI与信スコアリングシステム",
                        content: "従来の財務データに加え、取引履歴、業界動向、ESGスコア等の代替データを機械学習で分析。「ミドルリスク」企業の信用リスクをより精緻に評価し、適正な金利設定を実現。"
                    },
                    {
                        title: "リアルタイム反社チェック自動化",
                        content: "AI搭載の名寄せエンジンが、複数のデータベースを横断して反社会的勢力との関連性を自動スクリーニング。継続的モニタリングにより、既存顧客の状況変化も即座に検知。"
                    },
                    {
                        title: "統合リスク管理ダッシュボード",
                        content: "市場リスク、信用リスク、オペレーショナルリスクを統合的に可視化。AIが異常値を検知し、リスク限度額の超過やポートフォリオの偏りを事前に警告。"
                    }
                ]
            },
            back: {
                title: "バックオフィス向けAI解決策",
                solutions: [
                    {
                        title: "インテリジェント・プロセス・オートメーション（IPA）",
                        content: "RPAとAIを組み合わせ、勘定処理や照合作業を完全自動化。例外処理もAIが学習し、人的介入を最小限に抑制。処理時間を80%短縮し、エラー率を99%削減。"
                    },
                    {
                        title: "予測的システム保守",
                        content: "レガシーシステムの稼働状況をAIが常時監視し、障害発生を事前予測。計画的なメンテナンスにより、システムダウンタイムを最小化し、業務継続性を確保。"
                    },
                    {
                        title: "自動規制報告生成システム",
                        content: "各種規制要件に応じた報告書をAIが自動生成。データの整合性チェックと異常値検知により、報告ミスを防止。規制変更にも迅速に対応。"
                    }
                ]
            }
        },
        securities: {
            front: {
                title: "フロントオフィス向けAI解決策",
                solutions: [
                    {
                        title: "AI投資アドバイザリー・プラットフォーム",
                        content: "顧客の投資目標、リスク許容度、市場環境を総合的に分析し、個別最適化されたポートフォリオを提案。手数料収入に依存しない、アドバイザリーフィー型のビジネスモデルを実現。"
                    },
                    {
                        title: "インテリジェント・トレーディング・システム",
                        content: "市場データ、ニュース、ソーシャルメディアの感情分析をリアルタイムで統合し、最適な取引タイミングと価格を提案。アルゴリズム取引の高度化により、執行コストを削減。"
                    },
                    {
                        title: "次世代ロボアドバイザー",
                        content: "従来の質問票ベースから、行動データと市場環境の変化を継続的に学習する動的リバランシングシステムへ進化。ESG投資やテーマ投資にも対応。"
                    }
                ]
            },
            middle: {
                title: "ミドルオフィス向けAI解決策",
                solutions: [
                    {
                        title: "リアルタイム取引監視システム",
                        content: "HFTやアルゴリズム取引を含む全取引をAIがリアルタイム監視。異常な取引パターンや市場操縦の兆候を即座に検知し、コンプライアンス違反を未然に防止。"
                    },
                    {
                        title: "動的リスク管理システム",
                        content: "ポートフォリオのリスクをリアルタイムで計算し、市場変動に応じて自動的にポジション調整を提案。VaR（バリュー・アット・リスク）の精度向上により、資本効率を最適化。"
                    },
                    {
                        title: "AI投資リサーチ・プラットフォーム",
                        content: "企業の財務データ、業界動向、ESG情報を統合分析し、投資判断をサポート。自然言語生成により、アナリストレポートの初稿を自動作成。"
                    }
                ]
            },
            back: {
                title: "バックオフィス向けAI解決策",
                solutions: [
                    {
                        title: "T+1決済対応自動化システム",
                        content: "決済サイクル短縮に向け、取引照合から決済指図まで全プロセスをAIが自動化。例外処理も機械学習により自動解決し、決済リスクを最小化。"
                    },
                    {
                        title: "インテリジェント・コーポレートアクション処理",
                        content: "配当支払い、株式分割、株主総会等のコーポレートアクションをAIが自動処理。顧客への通知も個別最適化し、参加率向上に貢献。"
                    },
                    {
                        title: "統合決済リスク管理",
                        content: "複数の決済システムを横断してリスクを監視。AIが決済失敗の可能性を事前予測し、代替決済ルートを自動選択。"
                    }
                ]
            }
        },
        insurance: {
            front: {
                title: "フロントオフィス向けAI解決策",
                solutions: [
                    {
                        title: "パーソナライズド保険商品設計",
                        content: "顧客の健康データ、ライフスタイル、リスクプロファイルをAIが分析し、個別最適化された保険商品を設計。テレマティクス保険やウェアラブルデバイス連携により、リアルタイム料金調整を実現。"
                    },
                    {
                        title: "AI引受査定システム",
                        content: "医療データ、職業情報、財務状況を総合的に分析し、リスク評価の精度を向上。画一的な査定から個別リスクベース査定へ転換し、適正な保険料設定を実現。"
                    },
                    {
                        title: "デジタル・インシュアランス・プラットフォーム",
                        content: "オンライン完結型の保険販売プラットフォーム。AIチャットボットが顧客の質問に回答し、最適な保険商品を提案。複雑な商品もインタラクティブな説明で理解促進。"
                    }
                ]
            },
            middle: {
                title: "ミドルオフィス向けAI解決策",
                solutions: [
                    {
                        title: "AI支払査定システム",
                        content: "医療画像解析、事故現場の画像認識、過去の類似事例との比較により、支払査定を自動化。詐欺検知アルゴリズムにより、不正請求を高精度で識別。"
                    },
                    {
                        title: "予測的商品開発プラットフォーム",
                        content: "人口動態、疾病トレンド、気候変動データを分析し、将来の保険ニーズを予測。新商品開発のリードタイムを短縮し、市場投入スピードを向上。"
                    },
                    {
                        title: "ESG統合資産運用システム",
                        content: "ESG要因を組み込んだポートフォリオ最適化により、長期的な運用収益を向上。気候変動リスクも定量化し、保険負債との統合管理を実現。"
                    }
                ]
            },
            back: {
                title: "バックオフィス向けAI解決策",
                solutions: [
                    {
                        title: "インテリジェント・ドキュメント・プロセッシング",
                        content: "診断書、死亡診断書、事故証明書等の複雑な手書き文書をAI-OCRで高精度読み取り。自然言語処理により、文書内容の自動分類と要約を実現。"
                    },
                    {
                        title: "ライフイベント自動対応システム",
                        content: "顧客の住所変更、結婚、出産等のライフイベントをAIが検知し、必要な契約変更手続きを自動提案。顧客満足度向上と事務効率化を両立。"
                    },
                    {
                        title: "レガシーシステム統合プラットフォーム",
                        content: "複数のレガシーシステムをAPIで連携し、データの一元管理を実現。AIがデータ品質を監視し、システム移行時のデータ整合性を保証。"
                    }
                ]
            }
        }
    },
    modalContent: {
        dx: { title: "DXの緊急性", content: "経済産業省が警告する「2025年の崖」は、日本の金融機関にとって存亡に関わる課題です。レガシーシステムの近代化に失敗した場合、2025年以降年間最大12兆円の経済損失が発生する可能性があります。\n\n問題の根源は、数十年にわたって各部門の短期的ニーズに合わせて過度にカスタマイズされたシステム群にあります。これらは現在、複雑で文書化が不十分な「技術的負債」となり、システムを深く理解していた技術者の引退により、維持・改修が極めて困難になっています。\n\n対応策として、日本の金融機関の56%（世界平均38%）がハイブリッドクラウド戦略を採用し、顧客向けフロントエンドの近代化を優先しつつ、基幹システムの移行を慎重に進めています。しかし、この段階的アプローチは、クラウドネイティブなフィンテック企業との競争において、イノベーションスピードで劣位に立つリスクを内包しています。\n\n三菱UFJフィナンシャル・グループはマイクロソフトとの提携によりグループ共通クラウドプラットフォームを構築し、りそなホールディングスは2018年から「りそなグループアプリ」を中心としたデジタルファースト戦略を展開するなど、先進的な取り組みが始まっています。" },
        fintech: { title: "フィンテックとの連携", content: "日本のフィンテックは、既存の金融機関を破壊する「ディスラプター」としてではなく、既存のサービスを補完・強化する「イネーブラー」としての役割が強いのが特徴です。これは、安定性とセキュリティを最優先する日本の金融文化と、消費者保護を重視する規制環境が背景にあります。\n\n金融機関はフィンテック企業と提携することで、自社の信頼性と顧客基盤を活用しつつ、新しい技術を安全に導入できます。一方、フィンテック企業は、提携によって巨大な市場へのアクセスと信用の獲得が可能になります。しかし、この協調的なモデルは、既存のビジネスモデルを根底から覆すような破壊的イノベーションを抑制してしまう可能性も指摘されています。" },
        regulation: { title: "新たな金融政策と規制", content: "2024年3月の日本銀行によるマイナス金利政策（NIRP）とイールドカーブコントロール（YCC）の廃止は、数十年来の超金融緩和時代の正式な終了を意味する歴史的転換点です。\n\nこの長期間の金融緩和は、企業金融の支援と信用収縮の回避には成功しましたが、金融機関の収益性に構造的なダメージを与えました。特に銀行は、利ざやの継続的な圧縮により、より高いリスクを取ることを余儀なくされ、債券ポートフォリオの期間延長や「ミドルリスク」企業への融資拡大により、金利リスクと信用リスクの両方への露出を増大させました。\n\n規制面では、金融庁が処方箋的なチェックリスト型監督から、前向きでリスクベースの監督フレームワークへと移行しています。イノベーション促進のため、規制サンドボックスやフィンテック・イノベーション・ハブを設立し、規制当局とイノベーターの間の正式な対話チャネルを構築しています。\n\n政府レベルでは、「資産所得倍増プラン」が重要な政策推進力となっています。家計資産を低利回りの銀行預金から「貯蓄から投資へ」とシフトさせることを目的とし、NISA制度の大幅拡充と恒久化、個人型確定拠出年金（iDeCo）の改革を通じて実現を図っています。" },
        esg: { title: "ESG経営の浸透", content: "日本におけるESGは、欧米のような政治的な対立とは一線を画し、国の長期的な経済競争力を高めるための「産業政策」として位置づけられています。政府は2050年のカーボンニュートラル達成を目標に掲げ、GX（グリーン・トランスフォーメーション）債を発行するなど、金融システムを通じて産業界の脱炭素化を後押ししています。\n\nこの動きを決定づけたのが、世界最大の年金基金であるGPIFの存在です。GPIFが早期からESG投資を本格化させたことで、市場全体のESGへの取り組みが加速しました。企業の気候関連リスクの情報開示を求めるコーポレートガバナンス・コードの改訂も、この流れを後押ししています。" },
        embedded: { title: "Embedded Finance (組込型金融)", content: "金融の未来像の一つが、金融サービスが日常生活のあらゆる場面に「溶け込む」世界です。例えば、ECサイトで商品購入と同時にローンを組んだり、旅行予約サイトで保険に加入したりすることが当たり前になります。このトレンドにより、金融機関は、BaaSプロバイダーとして非金融企業に金融機能を提供する「インフラ屋」になるか、あるいは様々なプラットフォーム上で顧客に選ばれる「ブランド」となるかの戦略的選択を迫られます。" },
        personalization: { title: "ハイパー・パーソナライゼーション", content: "これからの金融サービスでは、顧客を大まかなセグメントで分けるのではなく、データとAIを用いて一人ひとりの状況や目標に合わせた最適なアドバイスや商品をリアルタイムで提供する「ハイパー・パーソナライゼーション」が競争力の源泉となります。これを実現するには、サイロ化された顧客データを統合し、顧客の金融生活全体を360度から理解する高度なデータ分析基盤が不可欠です。" },
        ecosystem: { title: "エコシステム・オーケストレーター", content: "伝統的な、自前主義の垂直統合型金融機関のモデルは時代遅れになりつつあります。未来のリーディングカンパニーは、自社で全ての機能を開発するのではなく、フィンテック企業、ITジャイアント、さらにはヘルスケアやリテールといった他業種の企業とも戦略的にパートナーシップを組み、より広範な顧客の課題を解決する「エコシステム」を主導する「オーケストレーター」としての役割を担うことになるでしょう。" },
    }
};

// Main application initialization
document.addEventListener('DOMContentLoaded', () => {
    const articleContent = document.getElementById('article-content');
    const sectionNav = document.getElementById('section-nav');
    const modal = document.getElementById('modal');
    const modalTitle = document.getElementById('modal-title');
    const modalBody = document.getElementById('modal-body');
    const modalClose = document.getElementById('modal-close');
    
    let currentChart = null;
    let currentView = 'overview';
    let currentStage = 'front';

    function formatText(text) {
        return text.replace(/\n/g, '<br>');
    }

    function showModal(contentId) {
        const content = reportData.modalContent[contentId];
        if (content) {
            modalTitle.textContent = content.title;
            modalBody.innerHTML = formatText(content.content);
            modal.classList.add('visible');
        }
    }
    
    function hideModal() {
        modal.classList.remove('visible');
    }
    
    modal.addEventListener('click', (e) => {
        if (e.target === modal || e.target === modalClose) {
            hideModal();
        }
    });

    function createOverviewView() {
        const data = reportData.overview;
        let html = `
            <div class="content-section fade-in">
                <h2 class="section-title">${data.title}</h2>
                <p class="section-text">${data.intro}</p>
            </div>
        `;

        data.sections.forEach(section => {
            html += `<div class="content-section">
                <h3 class="section-subtitle">${section.title}</h3>`;
            
            if (section.intro) {
                html += `<p class="section-text">${section.intro}</p>`;
            }

            if (section.type === 'cards') {
                html += `<div class="card-grid">`;
                section.items.forEach(item => {
                    html += `
                        <div class="card" data-modal-id="${item.id}">
                            <div class="card-title">
                                <span style="font-size: 1.5rem;">${item.icon}</span>
                                ${item.title}
                            </div>
                            <div class="card-content">${item.content}</div>
                        </div>
                    `;
                });
                html += `</div>`;
            } else if (section.type === 'list') {
                section.items.forEach(item => {
                    html += `
                        <div class="content-section">
                            <h4 class="section-subtitle" style="font-size: 1.125rem;">${item.title}</h4>
                            <p class="section-text">${item.content}</p>
                        </div>
                    `;
                });
            }
            html += `</div>`;
        });

        return html;
    }
    
    function createChart(data) {
        const canvas = document.getElementById('chart-canvas');
        if (!canvas) return;
        
        const ctx = canvas.getContext('2d');
        if (currentChart) {
            currentChart.destroy();
        }
        
        currentChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: data.labels,
                datasets: [data.datasets[0]]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false }
                },
                scales: {
                    y: { beginAtZero: true }
                }
            }
        });
        
        // Add metric switching functionality
        const container = canvas.closest('.chart-section');
        if (container) {
            container.addEventListener('click', (e) => {
                if (e.target.classList.contains('metric-btn')) {
                    const index = e.target.dataset.metric;
                    if (data.datasets[index]) {
                        currentChart.data.datasets[0] = data.datasets[index];
                        currentChart.update();
                        
                        container.querySelectorAll('.metric-btn').forEach(btn => 
                            btn.classList.remove('active'));
                        e.target.classList.add('active');
                    }
                }
            });
        }
    }

    function updateAiSolutions(viewName, stageId) {
        const aiSolutionsContent = document.getElementById('ai-solutions-content');
        if (!aiSolutionsContent || !reportData.aiSolutions[viewName] || !reportData.aiSolutions[viewName][stageId]) {
            return;
        }

        const solutionData = reportData.aiSolutions[viewName][stageId];
        let html = `<h5 class="text-md font-semibold text-slate-800 mb-3">${solutionData.title}</h5>`;
        
        solutionData.solutions.forEach((solution, index) => {
            html += `
                <div class="mb-4 ${index > 0 ? 'border-t border-slate-200 pt-4' : ''}">
                    <h6 class="text-sm font-semibold text-slate-800 mb-2">解決策${index + 1}: ${solution.title}</h6>
                    <p class="text-sm text-slate-600">${solution.content}</p>
                </div>
            `;
        });

        aiSolutionsContent.innerHTML = html;
    }

    function createSectorView(viewName) {
        currentView = viewName;
        currentStage = 'front';
        const data = reportData[viewName];
        
        let html = `
            <div class="content-section fade-in">
                <h2 class="section-title">${data.title}</h2>
                <p class="section-text">${data.intro}</p>
            </div>
        `;
        
        // Operational Flow
        if (data.operationalFlow) {
            const flow = data.operationalFlow;
            html += `
                <div class="content-section">
                    <h3 class="section-subtitle">${flow.title}</h3>
                    <p class="section-text">${flow.intro}</p>
                    
                    <div class="process-flow">`;
            
            flow.stages.forEach((stage, index) => {
                html += `
                    <div class="process-step" data-stage="${stage.id}">
                        <strong>${stage.name}</strong>
                    </div>
                `;
                if (index < flow.stages.length - 1) {
                    html += `<div class="process-arrow">→</div>`;
                }
            });
            
            html += `
                    </div>
                    <div class="process-detail" id="process-detail">
                        ${formatText(flow.stages[0].content)}
                    </div>
                </div>
            `;
        }
        
        // Financial Data
        if (data.financials) {
            const fin = data.financials;
            html += `
                <div class="chart-section">
                    <h3 class="section-subtitle">${fin.title}</h3>
                    <p class="section-text">${fin.intro}</p>
                    
                    <div class="metric-buttons">`;
            
            fin.data.datasets.forEach((dataset, index) => {
                const active = index === 0 ? 'active' : '';
                html += `
                    <button class="metric-btn ${active}" data-metric="${index}">
                        ${dataset.label.split(' ')[0]}
                    </button>
                `;
            });
            
            html += `
                    </div>
                    <div class="chart-container">
                        <canvas id="chart-canvas"></canvas>
                    </div>
                </div>
            `;
        }
        
        return html;
    }
    
    function renderView(viewName) {
        currentView = viewName;
        let html = '';
        
        if (viewName === 'overview') {
            html = createOverviewView();
        } else {
            html = createSectorView(viewName);
        }
        
        articleContent.innerHTML = html;
        
        // Add event listeners
        if (viewName === 'overview') {
            // Card click handlers for modals
            articleContent.querySelectorAll('.card').forEach(card => {
                card.addEventListener('click', () => {
                    const modalId = card.dataset.modalId;
                    if (modalId) showModal(modalId);
                });
            });
        } else {
            // Process flow interaction
            const processSteps = articleContent.querySelectorAll('.process-step');
            const processDetail = articleContent.querySelector('#process-detail');
            
            if (processSteps.length > 0) {
                processSteps[0].classList.add('active');
                
                processSteps.forEach(step => {
                    step.addEventListener('click', () => {
                        processSteps.forEach(s => s.classList.remove('active'));
                        step.classList.add('active');
                        
                        const stageId = step.dataset.stage;
                        const stageData = reportData[currentView].operationalFlow.stages
                            .find(s => s.id === stageId);
                        
                        if (stageData && processDetail) {
                            processDetail.innerHTML = formatText(stageData.content);
                        }
                    });
                });
            }
            
            // Chart rendering
            if (reportData[viewName].financials) {
                createChart(reportData[viewName].financials.data);
            }
        }
    }

    // Navigation event handler
    sectionNav.addEventListener('click', (e) => {
        if (e.target.classList.contains('section-btn')) {
            const viewName = e.target.dataset.view;
            if (viewName) {
                sectionNav.querySelectorAll('.section-btn').forEach(btn => 
                    btn.classList.remove('active'));
                e.target.classList.add('active');
                renderView(viewName);
            }
        }
    });

    // Initialize
    renderView('overview');
});

// Theme functionality
function toggleTheme() {
    const current = document.documentElement.getAttribute('data-theme');
    const newTheme = current === 'dark' ? 'light' : 'dark';
    const icon = document.getElementById('theme-icon');
    
    document.documentElement.setAttribute('data-theme', newTheme);
    localStorage.setItem('theme', newTheme);
    
    icon.className = newTheme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
}

// Initialize theme
document.addEventListener('DOMContentLoaded', function() {
    const savedTheme = localStorage.getItem('theme') || 'light';
    const icon = document.getElementById('theme-icon');
    
    document.documentElement.setAttribute('data-theme', savedTheme);
    icon.className = savedTheme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
});
    </script>
</body>
</html> 